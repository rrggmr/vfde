{"remainingRequest":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/src/components/dashboard/data/DataRouter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/src/components/dashboard/data/DataRouter.vue","mtime":1639653885447},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/cache-loader/dist/cjs.js","mtime":1639655034192},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/babel-loader/lib/index.js","mtime":1639655034093},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/cache-loader/dist/cjs.js","mtime":1639655034192},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/vue-loader/lib/index.js","mtime":1639655080628}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb3V0ZXMgZnJvbSAiQC9yb3V0ZXIvcm91dGVzL2RhdGEiOwppbXBvcnQgU2lkZWJhciBmcm9tICJAL2NvbXBvbmVudHMvZGFzaGJvYXJkL1NpZGViYXIiOwppbXBvcnQgc2lkZWJhck1ldGhvZHMgZnJvbSAiQC9taXhpbnMvc2lkZWJhck1ldGhvZHMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEYXRhUm91dGVyIiwKICBjb21wb25lbnRzOiB7U2lkZWJhcn0sCiAgbWl4aW5zOiBbCiAgICBzaWRlYmFyTWV0aG9kcwogIF0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvdXRlczogcm91dGVzWzBdLmNoaWxkcmVuLAogICAgICB0YWI6IDEsCiAgICAgIHNpZGViYXJDb250YWluZXJWaXNpYmxlOiBmYWxzZSwKICAgICAgc2lkZWJhcnM6IFtdLAogICAgICB0YWJTZXQ6IGZhbHNlCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zZXRJbml0aWFsVGFiKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGV4cGFuZE5lc3RlZERhdGEobmV3U2lkZWJhckNvbnRlbnQpIHsKICAgICAgLy8gdGhpcy5zaWRlYmFycy5wdXNoKG5ld1NpZGViYXIpCiAgICAgIGNvbnN0IHNpZGViYXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2lkZWJhckNvbnRhaW5lciIpCiAgICAgIHNpZGViYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaW5kZW50ZWQnKQogICAgICBsZXQgdXBkYXRlU2lkZWJhcnMgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgaWYgKHRoaXMuc2lkZWJhcnMucHVzaChuZXdTaWRlYmFyQ29udGVudCkpIHsKICAgICAgICAgIHJlc29sdmUoIlN1Y2Nlc3MiKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoIkZhaWxlZCIpCiAgICAgICAgfQogICAgICB9KQogICAgICAvLyBPbmNlIGl0J3MgYmVlbiBhZGRlZCwgc2Nyb2xsIGludG8gdmlldyBzbyB3ZSBhbHdheXMgc2VlIHRoZSBtb3N0IHJlY2VudCBzaWRlYmFyLgogICAgICB1cGRhdGVTaWRlYmFycy50aGVuKCgpPT4gewogICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50U2lkZWJhcigpCiAgICAgIH0pLnRoZW4oKCk9PiB7dGhpcy5hbmltYXRlU2lkZWJhcnMoc2lkZWJhckNvbnRhaW5lcil9KQogICAgfSwKICAgIGdldFNpZGViYXJzKHNpZGViYXJzKSB7CiAgICAgIHRoaXMuc2lkZWJhcnMgPSBzaWRlYmFycwogICAgfSwKICAgIHNldEluaXRpYWxUYWIoKSB7CiAgICAgIC8vIE5lZWRzIGEgYmxhbmsgdGltZW91dCBvciBpdCBnbGl0Y2hlcyBiYWNrIHRvIHRoZSBpbml0aWFsIHZhbHVlIG9mIDAuCiAgICAgIC8vIFRPRE86IE1pZ2h0IGJlIGFibGUgdG8gcmVwbGFjZSB0aGlzIHdpdGggYSBwcm9taXNlPwogICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICBjb21wb25lbnQudGFiPWNvbXBvbmVudC5nZXRBY3RpdmVUYWIoKQogICAgICAgIGNvbXBvbmVudC50YWJTZXQgPSB0cnVlCiAgICAgIH0sIDApOwogICAgfSwKICAgIGdldEFjdGl2ZVRhYigpIHsKICAgICAgY29uc3QgYWN0aXZlVGFiTmFtZSA9IHRoaXMuJHJvdXRlLnBhdGguc3BsaXQoJy8nKVsyXQogICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCByb3V0ZVBhdGggPSB0aGlzLnJvdXRlc1tpXS5wYXRoLnJlcGxhY2UoJy8nLCcnKS5yZXBsYWNlKC9cKi9nLCAnJykKICAgICAgICBjb25zdCBtYXRjaCA9IGFjdGl2ZVRhYk5hbWUgPT09IHJvdXRlUGF0aAogICAgICAgIGlmKG1hdGNoKSB7CiAgICAgICAgICByZXR1cm4gaQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gMAogICAgfSwKICAgIHNob3dTaWRlYmFyKGRhdGEpIHsKICAgICAgdGhpcy5zaWRlYmFyVHlwZSA9IGRhdGEudHlwZQogICAgICB0aGlzLnNpZGViYXJXaWR0aCA9IGRhdGEud2lkdGgKICAgICAgdGhpcy5zaWRlYmFyQ29udGFpbmVyVmlzaWJsZSA9IHRoaXMuc2lkZWJhcnMubGVuZ3RoPjAKICAgIH0sCiAgICBjb2xsYXBzZVNpZGViYXIoaW5kZXgpIHsKICAgICAgY29uc29sZS5sb2coJ0Nsb3Npbmcgc2lkZWJhcicsIGluZGV4KQogICAgICBjb25zb2xlLmxvZyh0aGlzLnNpZGViYXJzKQogICAgICB0aGlzLnNpZGViYXJzID0gdGhpcy5zaWRlYmFycy5zbGljZSgwLCBpbmRleCkKICAgICAgdGhpcy5zaWRlYmFyQ29udGFpbmVyVmlzaWJsZSA9IHRoaXMuc2lkZWJhcnMubGVuZ3RoPjAKICAgICAgaWYgKCF0aGlzLnNpZGViYXJDb250YWluZXJWaXNpYmxlKSB7CiAgICAgICAgdGhpcy5iYWNrVG9CYXNlVXJsKCkKICAgICAgfQogICAgfSwKICAgIGJhY2tUb0Jhc2VVcmwoKSB7CiAgICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gdGhpcy4kcm91dGUucGF0aAogICAgICBjb25zdCBwYXRoRWxlbWVudHMgPSBjdXJyZW50UGF0aC5zcGxpdCgnLycpCiAgICAgIGNvbnN0IGVkaXRvclBvc2l0aW9uID0gcGF0aEVsZW1lbnRzLmluZGV4T2YoJ2VkaXRvcicpCiAgICAgIGNvbnN0IHNsaWNlID0gcGF0aEVsZW1lbnRzLnNsaWNlKDAsIGVkaXRvclBvc2l0aW9uKQogICAgICBjb25zdCBuZXdQYXRoID0gc2xpY2Uuam9pbignLycpICsgJy8nCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKG5ld1BhdGgpCiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHRhYigpIHsKICAgICAgY29uc3Qgb2xkUGF0aCA9IHRoaXMuJHJvdXRlLnBhdGgKICAgICAgbGV0IG5ld1BhdGggPSAnL2RhdGEvJyArIHRoaXMucm91dGVzW3RoaXMudGFiXS5wYXRoLnJlcGxhY2UoL1wqL2csICcnKSArICcvJwogICAgICBuZXdQYXRoID0gbmV3UGF0aC5yZXBsYWNlKCcvLycsICcvJykKICAgICAgY29uc3QgY2hpbGRyZW4gPSBvbGRQYXRoLnJlcGxhY2UobmV3UGF0aCwgJycpCiAgICAgIGlmIChuZXdQYXRoICE9PSBvbGRQYXRoICYmIG5ld1BhdGggKyBjaGlsZHJlbiAhPT0gb2xkUGF0aCkgewogICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChuZXdQYXRoKQogICAgICB9CiAgICB9LAogICAgJHJvdXRlKCkgewogICAgICB0aGlzLnRhYiA9IHRoaXMuZ2V0QWN0aXZlVGFiKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["DataRouter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataRouter.vue","sourceRoot":"src/components/dashboard/data","sourcesContent":["<template>\n  <div>\n    <b-tabs v-model=\"tab\" v-if=\"tabSet\">\n      <b-tab\n          v-for=\"(route) in routes\"\n          :key=\"route.name\"\n          :title=\"$t(route.name)\"\n      >\n      </b-tab>\n      <b-card>\n        <router-view @showSidebar=\"showSidebar\" @passSidebars=\"getSidebars\" />\n      </b-card>\n    </b-tabs>\n    <div id=\"sidebarContainer\" v-if=\"sidebarContainerVisible\" >\n      <Sidebar\n          v-for=\"(sidebar, index) in sidebars\"\n          :key=\"`sidebar_${sidebar.id}`\"\n          :sidebar-type=\"sidebar.type\"\n          :sidebar-width=\"sidebar.width\"\n          :sidebar-content=\"sidebar.content\"\n          @closeSidebar=\"collapseSidebar(index)\"\n          @expandNestedData=\"expandNestedData\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport routes from \"@/router/routes/data\";\nimport Sidebar from \"@/components/dashboard/Sidebar\";\nimport sidebarMethods from \"@/mixins/sidebarMethods\";\n\nexport default {\n  name: \"DataRouter\",\n  components: {Sidebar},\n  mixins: [\n    sidebarMethods\n  ],\n  data() {\n    return {\n      routes: routes[0].children,\n      tab: 1,\n      sidebarContainerVisible: false,\n      sidebars: [],\n      tabSet: false\n    }\n  },\n  mounted() {\n    this.setInitialTab()\n  },\n  methods: {\n    expandNestedData(newSidebarContent) {\n      // this.sidebars.push(newSidebar)\n      const sidebarContainer = document.getElementById(\"sidebarContainer\")\n      sidebarContainer.classList.add('indented')\n      let updateSidebars = new Promise((resolve, reject) => {\n        if (this.sidebars.push(newSidebarContent)) {\n          resolve(\"Success\")\n        } else {\n          reject(\"Failed\")\n        }\n      })\n      // Once it's been added, scroll into view so we always see the most recent sidebar.\n      updateSidebars.then(()=> {\n        this.scrollToCurrentSidebar()\n      }).then(()=> {this.animateSidebars(sidebarContainer)})\n    },\n    getSidebars(sidebars) {\n      this.sidebars = sidebars\n    },\n    setInitialTab() {\n      // Needs a blank timeout or it glitches back to the initial value of 0.\n      // TODO: Might be able to replace this with a promise?\n      const component = this\n      setTimeout(function(){\n        component.tab=component.getActiveTab()\n        component.tabSet = true\n      }, 0);\n    },\n    getActiveTab() {\n      const activeTabName = this.$route.path.split('/')[2]\n      for (let i=0; i<this.routes.length; i++) {\n        const routePath = this.routes[i].path.replace('/','').replace(/\\*/g, '')\n        const match = activeTabName === routePath\n        if(match) {\n          return i\n        }\n      }\n      return 0\n    },\n    showSidebar(data) {\n      this.sidebarType = data.type\n      this.sidebarWidth = data.width\n      this.sidebarContainerVisible = this.sidebars.length>0\n    },\n    collapseSidebar(index) {\n      console.log('Closing sidebar', index)\n      console.log(this.sidebars)\n      this.sidebars = this.sidebars.slice(0, index)\n      this.sidebarContainerVisible = this.sidebars.length>0\n      if (!this.sidebarContainerVisible) {\n        this.backToBaseUrl()\n      }\n    },\n    backToBaseUrl() {\n      const currentPath = this.$route.path\n      const pathElements = currentPath.split('/')\n      const editorPosition = pathElements.indexOf('editor')\n      const slice = pathElements.slice(0, editorPosition)\n      const newPath = slice.join('/') + '/'\n      this.$router.push(newPath)\n    },\n  },\n  watch: {\n    tab() {\n      const oldPath = this.$route.path\n      let newPath = '/data/' + this.routes[this.tab].path.replace(/\\*/g, '') + '/'\n      newPath = newPath.replace('//', '/')\n      const children = oldPath.replace(newPath, '')\n      if (newPath !== oldPath && newPath + children !== oldPath) {\n         this.$router.push(newPath)\n      }\n    },\n    $route() {\n      this.tab = this.getActiveTab()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
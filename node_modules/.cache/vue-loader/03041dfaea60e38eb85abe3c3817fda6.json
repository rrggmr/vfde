{"remainingRequest":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/src/components/dashboard/config/data_sources/DataSourceEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/src/components/dashboard/config/data_sources/DataSourceEditor.vue","mtime":1639653885445},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/cache-loader/dist/cjs.js","mtime":1639655034192},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/babel-loader/lib/index.js","mtime":1639655034093},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/cache-loader/dist/cjs.js","mtime":1639655034192},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/vue-loader/lib/index.js","mtime":1639655080628}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZWJvdW5jZSBmcm9tICdkZWJvdW5jZScKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUvc3RvcmUiOwppbXBvcnQgY29uZiwge2Zha2VEYXRhfSBmcm9tICJAL2NvbmZpZyIKaW1wb3J0IGNvbW1vbk1ldGhvZHMgZnJvbSAiQC9taXhpbnMvY29tbW9uTWV0aG9kcyI7CmltcG9ydCBEYXRhc291cmNlRWRpdG9yQnV0dG9ucyBmcm9tICJAL2NvbXBvbmVudHMvZGFzaGJvYXJkL2NvbmZpZy9kYXRhX3NvdXJjZXMvRGF0YXNvdXJjZUVkaXRvckJ1dHRvbnMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEYXRhU291cmNlRWRpdG9yIiwKICBjb21wb25lbnRzOiB7RGF0YXNvdXJjZUVkaXRvckJ1dHRvbnN9LAogIG1peGluczogWwogICAgY29tbW9uTWV0aG9kcwogIF0sCiAgbWV0aG9kczogewoKICAgIC8vIERhdGFzb3VyY2UgbWV0aG9kcwogICAgY2hlY2tGb3JEYXRhc291cmNlKCkgewogICAgICBpZiAodGhpcy5kYXRhc291cmNlSWQpIHsKICAgICAgICAvLyBEdW1teSBkYXRhLCBuZWVkcyB0byBiZSByZXBsYWNlZCB3aXRoIGVpdGhlciBhbiBBUEkgY2FsbCBvciBnZXR0aW5nIHRoZSBkYXRhIGZyb20gbWVtb3J5LgogICAgICAgIGNvbnN0IGRhdGFzb3VyY2UgPSBmYWtlRGF0YS5kYXRhU291cmNlc1swXQoKICAgICAgICBpZiAoZGF0YXNvdXJjZS5lZGl0b3JDb25maWcuYWR2YW5jZWQpIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWIgPSAxCiAgICAgICAgICB0aGlzLnRhYnNLZXkgPSBEYXRlLm5vdygpCiAgICAgICAgICB0aGlzLnB5dGhvbkNvZGUgPSBkYXRhc291cmNlLnB5dGhvbkNvZGUKICAgICAgICAgIHRoaXMudXNpbmdBZHZhbmNlZEVkaXRvciA9IHRydWUKICAgICAgICB9CiAgICAgICAgdGhpcy5kYXRhc291cmNlVVVJRCA9IGRhdGFzb3VyY2UuZWRpdG9yQ29uZmlnLmlkLnZhbHVlCiAgICAgICAgaWYgKGRhdGFzb3VyY2UuZWRpdG9yQ29uZmlnLmlkLmZyZWVUZXh0KSB7CiAgICAgICAgICB0aGlzLnV1aWRBbGxvd0ZyZWV0ZXh0KGZhbHNlKQogICAgICAgIH0KICAgICAgICB0aGlzLmRhdGFzb3VyY2VOYW1lID0gZGF0YXNvdXJjZS5uYW1lCiAgICAgICAgdGhpcy5nZXREYXRhc291cmNlVHlwZShkYXRhc291cmNlLmVkaXRvckNvbmZpZy50eXBlKQogICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZGF0YXNvdXJjZS5lZGl0b3JDb25maWcuc3RyZWFtaW5nCiAgICAgICAgdGhpcy5zY2hlbWEgPSBkYXRhc291cmNlLmVkaXRvckNvbmZpZy5maWVsZHMKICAgICAgICB0aGlzLm9wdGlvbnMgPSBkYXRhc291cmNlLmVkaXRvckNvbmZpZy5vcHRpb25zCiAgICAgICAgdGhpcy5kYXRlTW9kaWZpZWQgPSBkYXRhc291cmNlLm1vZGlmaWVkCiAgICAgICAgdGhpcy5kYXRlQ3JlYXRlZCA9IHRoaXMuc3FsRGF0ZShkYXRhc291cmNlLmNyZWF0ZWQpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kYXRhc291cmNlVVVJRCA9IHRoaXMuZGF0YXNvdXJjZVVVSUREZWZhdWx0CiAgICAgICAgdGhpcy5kYXRlQ3JlYXRlZCA9IHRoaXMuc3FsRGF0ZSgpCiAgICAgICAgdGhpcy5kYXRlTW9kaWZpZWQgPSB0aGlzLnNxbERhdGUoKQogICAgICB9CiAgICB9LAogICAgZ2V0RGF0YXNvdXJjZVR5cGUodHlwZSkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YXNvdXJjZVR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZGF0YXNvdXJjZVR5cGVzW2ldLm5hbWUgPT09IHR5cGUpIHsKICAgICAgICAgIHRoaXMuZGF0YXNvdXJjZVR5cGUgPSBpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXN5bmMgcnVuKCkgewogICAgICB0aGlzLnB5dGhvbkNvZGVHZW5lcmF0ZSgpOwogICAgICAvLyBGYWtlIEFQSSByZXF1ZXN0IHRvIGdldCBzb21lIGR1bW15IGRhdGEgdW50aWwgdGhlIGJhY2tlbmQgaXMgcmVhZHkuCiAgICAgIGNvbnN0IHVybCA9ICdodHRwczovL21vY2tpLmlvL3YxL2RlN2RkYmZjLTM2ODMtNDJkMS1iNmNhLTFkOThlOTViYjZhZScKICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGF4aW9zLmdldCh1cmwpOwogICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzLmRhdGE7CiAgICB9LAogICAgYXN5bmMgc2F2ZSgpIHsKICAgICAgdGhpcy5weXRob25Db2RlR2VuZXJhdGUoKTsKICAgICAgY29uc3QgZGF0YXNvdXJjZVRvU2F2ZSA9IHsKICAgICAgICBuYW1lOiB0aGlzLmRhdGFzb3VyY2VOYW1lLAogICAgICAgIGVkaXRvckNvbmZpZzogewogICAgICAgICAgaWQ6IHsKICAgICAgICAgICAgdmFsdWU6IHRoaXMuZGF0YXNvdXJjZVVVSUQsCiAgICAgICAgICAgIGZyZWVUZXh0OiAhdGhpcy51dWlkRGlzYWJsZWQsCiAgICAgICAgICB9LAogICAgICAgICAgdHlwZTogdGhpcy5kYXRhc291cmNlVHlwZSwKICAgICAgICAgIHN0cmVhbWluZzogdGhpcy5zdHJlYW1pbmcsCiAgICAgICAgICBmaWVsZHM6IHRoaXMuc2NoZW1hLAogICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLAogICAgICAgICAgYWR2YW5jZWQ6IHRoaXMudXNpbmdBZHZhbmNlZEVkaXRvcgogICAgICAgIH0sCiAgICAgICAgcHl0aG9uQ29kZTogdGhpcy5weXRob25Db2RlLAogICAgICAgIGNyZWF0ZWQ6IHRoaXMuZGF0ZUNyZWF0ZWQsCiAgICAgICAgbW9kaWZpZWQ6IHRoaXMuc3FsRGF0ZSgpLAogICAgICB9CiAgICAgIC8vIFRlbXBvcmFyaWx5IGxvZ2dpbmcsIHRoaXMgd2lsbCBiZSBzZW50IHRvIHRoZSBBUEkgdG8gYmUgc2F2ZWQuCiAgICAgIGNvbnNvbGUubG9nKGRhdGFzb3VyY2VUb1NhdmUpCiAgICB9LAoKCiAgICAvLyBGaWVsZHMgbWV0aG9kcwogICAgZmllbGRzQWRkKCkgewogICAgICB0aGlzLnNjaGVtYS5wdXNoKHRoaXMuZmllbGRzTmV3KHRoaXMuZmllbGRzWzBdKSkKICAgIH0sCiAgICBmaWVsZHNEZWxldGUoaW5kZXgpIHsKICAgICAgdGhpcy5zY2hlbWEuc3BsaWNlKGluZGV4LCAxKQogICAgfSwKICAgIGZpZWxkc05ldyhmaWVsZFR5cGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBmaWVsZFR5cGU6IGZpZWxkVHlwZSwKICAgICAgICBudWxsYWJsZTogZmFsc2UKICAgICAgfQogICAgfSwKICAgIGZpZWxkc1NldEZpZWxkVHlwZShmaWVsZCwgbW92ZSA9IGZhbHNlKSB7CiAgICAgIHRoaXMuY3VycmVudEZpZWxkID0gZmllbGQKICAgICAgaWYgKG1vdmUpIHsKICAgICAgICB0aGlzLm9yaWdpbmFsSW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0LnJvd0luZGV4LTEKICAgICAgfQogICAgfSwKICAgIGZpZWxkc0RyYWdPdmVyUm93KGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnY3VycmVudFJvdycpOwogICAgfSwKICAgIGZpZWxkc0xlYXZlUm93KGV2ZW50KSB7CiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudFJvdycpOwogICAgfSwKICAgIGZpZWxkc0Ryb3AoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgLy8gRGVsZXRlIHRoZSBvcmlnaW5hbCByb3cgaWYgbmVjZXNzYXJ5CiAgICAgIGlmICh0aGlzLm9yaWdpbmFsSW5kZXggIT09IG51bGwpIHsKICAgICAgICAvLyBOZWVkcyB0byBjaGVjayBzcGVjaWZpY2FsbHkgZm9yIG51bGwgYXMgb3RoZXJ3aXNlIHJvdyAwIGlzIHRyZWF0ZWQgYXMgZmFsc3kKICAgICAgICB0aGlzLnNjaGVtYS5zcGxpY2UodGhpcy5vcmlnaW5hbEluZGV4LCAxKQogICAgICB9CiAgICAgIC8vIEFkZCB0aGUgbmV3IG9yIGNsb25lZCBpdGVtCiAgICAgIGxldCB0YXJnZXRSb3cgPSBldmVudC5jdXJyZW50VGFyZ2V0LnJvd0luZGV4CiAgICAgIGlmICh0aGlzLm9yaWdpbmFsSW5kZXggIT09IG51bGwpIHsKICAgICAgICBpZiAodGhpcy5vcmlnaW5hbEluZGV4IDw9IHRhcmdldFJvdy0xKSB7CiAgICAgICAgICB0YXJnZXRSb3cgLS0KICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5zY2hlbWEuc3BsaWNlKHRhcmdldFJvdywgMCwgdGhpcy5jdXJyZW50RmllbGQpCiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudFJvdycpOwogICAgICB0aGlzLm9yaWdpbmFsSW5kZXggPSBudWxsCiAgICB9LAoKICAgIC8vIE9wdGlvbnMgbWV0aG9kcwogICAgb3B0aW9uc0FkZCgpIHsKICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgIGtleTogJ3BhdGgnLAogICAgICAgIHZhbHVlOiAnJywKICAgICAgICBmcmVlVGV4dDogZmFsc2UKICAgICAgfQogICAgICB0aGlzLm9wdGlvbnMucHVzaChvcHRpb24pCiAgICB9LAogICAgb3B0aW9uc0RlbGV0ZShpbmRleCkgewogICAgICB0aGlzLm9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKQogICAgfSwKICAgIG9wdGlvbnNNYWtlS2V5RnJlZVRleHQoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICBjb25zdCBvcHRpb25JbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucm93SW5kZXggLSAxCiAgICAgIHRoaXMub3B0aW9uc1tvcHRpb25JbmRleF0uZnJlZVRleHQgPSB0cnVlCiAgICAgIGNvbnN0IGlucHV0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpCiAgICAgIC8vIFNldCB2ZXJ5IHNob3J0IHRpbWVvdXQgdG8gZ2l2ZSBpdCB0aW1lIHRvIHJlbmRlciBiZWZvcmUgZm9jdXNzaW5nLgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGlucHV0c1swXS5mb2N1cygpIH0sIDEwKTsKCiAgICB9LAoKICAgIC8vIFB5dGhvbiBDb2RlIG1ldGhvZHMKICAgIHB5dGhvbkNvZGVDaGVja0VkaXQoKSB7CiAgICAgIGlmICghdGhpcy51c2luZ0FkdmFuY2VkRWRpdG9yICYmICF0aGlzLnVwZGF0aW5nRnJvbUJhc2ljKSB7CiAgICAgICAgdGhpcy5zaG93TW9kYWwgPSB0cnVlCiAgICAgIH0KICAgIH0sCiAgICBweXRob25Db2RlQ29uZmlybUVkaXQoY29uZmlybSkgewogICAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlOwogICAgICB0aGlzLnVzaW5nQWR2YW5jZWRFZGl0b3IgPSBjb25maXJtOwogICAgICBpZiAoIWNvbmZpcm0pIHsKICAgICAgICB0aGlzLnB5dGhvbkNvZGUgPSB0aGlzLnB5dGhvbkNvZGVDYWNoZQogICAgICB9CiAgICB9LAogICAgcHl0aG9uQ29kZUdlbmVyYXRlKCkgewogICAgICBpZiAoIXRoaXMudXNpbmdBZHZhbmNlZEVkaXRvcikgewogICAgICAgIC8vIE9ubHkgYXV0b21hdGljYWxseSBnZW5lcmF0ZSBQeXRob24gY29kZSBpZiB0aGUgdXNlciBpcyB1c2luZyB0aGUgYmFzaWMgZWRpdG9yLgogICAgICAgIHRoaXMucHl0aG9uQ29kZSA9IHRoaXMucHl0aG9uQ29kZUdldFNjaGVtYSgpICsgY29uZi5weXRob24ubmV3TGluZQogICAgICAgIHRoaXMucHl0aG9uQ29kZSArPSAnZGYgPSBzcGFyay5yZWFkJwogICAgICAgIGlmICh0aGlzLnN0cmVhbWluZykgewogICAgICAgICAgdGhpcy5weXRob25Db2RlICs9ICdTdHJlYW0nCiAgICAgICAgfQogICAgICAgIHRoaXMucHl0aG9uQ29kZSArPSBjb25mLnB5dGhvbi5saW5lQnJlYWsKICAgICAgICB0aGlzLnB5dGhvbkNvZGUgKz0gY29uZi5weXRob24udGFiICsgYC5mb3JtYXQoIiR7dGhpcy5kYXRhc291cmNlVHlwZXNbdGhpcy5kYXRhc291cmNlVHlwZV0ubmFtZX0iKWAgKyBjb25mLnB5dGhvbi5saW5lQnJlYWsKICAgICAgICB0aGlzLnB5dGhvbkNvZGUgKz0gdGhpcy5weXRob25Db2RlR2V0T3B0aW9ucygpCiAgICAgICAgdGhpcy5weXRob25Db2RlICs9IGNvbmYucHl0aG9uLnRhYiArIGAuc2NoZW1hKHNjaGVtYSlgICsgY29uZi5weXRob24ubGluZUJyZWFrCiAgICAgICAgdGhpcy5weXRob25Db2RlICs9IGNvbmYucHl0aG9uLnRhYiArIGAubG9hZCgpYCArIGNvbmYucHl0aG9uLm5ld0xpbmUKICAgICAgICB0aGlzLnB5dGhvbkNvZGUgKz0gYGRmLmNyZWF0ZU9yUmVwbGFjZVRlbXBWaWV3KCIke3RoaXMuZGF0YXNvdXJjZVVVSUR9IilgCiAgICAgIH0KICAgIH0sCiAgICBweXRob25Db2RlR2V0U2NoZW1hKCkgewogICAgICBsZXQgcHl0aG9uU2NoZW1hID0gJycgKwogICAgICAgICAgJ3NjaGVtYSA9IFN0cnVjdFR5cGUoW1xuJwogICAgICB0aGlzLnNjaGVtYS5mb3JFYWNoKAogICAgICAgICAgKGZpZWxkKSA9PiB7CiAgICAgICAgICAgIHB5dGhvblNjaGVtYSArPSBjb25mLnB5dGhvbi50YWIgKyBgU3RydWN0RmllbGQoIiR7ZmllbGQubmFtZX0iLCAke2ZpZWxkLmZpZWxkVHlwZX0oKSwgJHtmaWVsZC5udWxsYWJsZX0pLFxuYAogICAgICAgICAgfQogICAgICApOwogICAgICBweXRob25TY2hlbWEgKz0gJ10pJwogICAgICByZXR1cm4gcHl0aG9uU2NoZW1hCiAgICB9LAogICAgcHl0aG9uQ29kZUdldE9wdGlvbnMoKSB7CiAgICAgIGxldCBweXRob25PcHRpb25zID0gJycKICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goCiAgICAgICAgICAob3B0aW9uKSA9PiB7CiAgICAgICAgICAgIHB5dGhvbk9wdGlvbnMgKz0gY29uZi5weXRob24udGFiICsgYC5vcHRpb24oIiR7b3B0aW9uLmtleX0iLCAiJHtvcHRpb24udmFsdWV9IilgICsgY29uZi5weXRob24ubGluZUJyZWFrCiAgICAgICAgICB9CiAgICAgICkKICAgICAgcmV0dXJuIHB5dGhvbk9wdGlvbnMKICAgIH0sCiAgICBweXRob25Db2RlUmVmcmVzaCgpIHsKICAgICAgdGhpcy5weXRob25Db2RlR2VuZXJhdGUoKQogICAgfSwKCiAgICAvLyBVVUlEIG1ldGhvZHMKICAgIHV1aWRBbGxvd0ZyZWV0ZXh0KGZvY3VzID0gdHJ1ZSkgewogICAgICB0aGlzLnV1aWREaXNhYmxlZCA9IGZhbHNlOwogICAgICBjb25zdCB1dWlkRWRpdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInV1aWQiKQogICAgICB1dWlkRWRpdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ2dyZXllZC1vdXQnKQogICAgICBpZiAoZm9jdXMpIHsKICAgICAgICAvLyBTZXQgdmVyeSBzaG9ydCB0aW1lb3V0IHRvIGdpdmUgaXQgdGltZSB0byByZW5kZXIgYmVmb3JlIGZvY3Vzc2luZy4KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IHV1aWRFZGl0b3IuZm9jdXMoKSB9LCAxMCk7CiAgICAgIH0KICAgIH0sCiAgICB1dWlkR2VuZXJhdGU6IGRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgLy8gRG9uJ3QgZ2VuZXJhdGUgYSBuZXcgaWQgaWYgZnJlZXRleHQgbW9kZSBoYXMgYmVlbiB1bmxvY2tlZC4KICAgICAgaWYgKHRoaXMudXVpZERpc2FibGVkKSB7CiAgICAgICAgLy8gUHJvZHVjZSBhIGRlZmF1bHQgaWYgdGhlIG5hbWUgaGFzIGJlZW4gZGVsZXRlZCBlbnRpcmVseQogICAgICAgIGlmICghdGhpcy5kYXRhc291cmNlTmFtZSkgewogICAgICAgICAgdGhpcy5kYXRhc291cmNlVVVJRCA9IHRoaXMuZGF0YXNvdXJjZVVVSUREZWZhdWx0CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgLy8gTG93ZXJjYXNlIGFuZCByZXBsYWNlIG5vbiBhbHBoYS1udW1lcmljIGNoYXJhY3RlcnMgd2l0aCBkYXNoZXMsCiAgICAgICAgICAvLyBhbmQgbGltaXQgdG8gb25lIGRhc2ggYmV0d2VlbiBlYWNoIHZhbGlkIGNoYXJhY3RlcgogICAgICAgICAgdGhpcy5kYXRhc291cmNlVVVJRCA9IHRoaXMuZGF0YXNvdXJjZU5hbWUKICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgIC50cmltKCkKICAgICAgICAgICAgICAucmVwbGFjZSgvW14oYS16MC05LSldL2csICctJykKICAgICAgICAgICAgICAucmVwbGFjZSgvLSsoPz0tKS9nLCcnKQogICAgICAgICAgLy8gVHJpbSBkYXNoZXMgZnJvbSBiZWdpbm5pbmcgYW5kIGVuZCBvZiB0aGUgc3Rpcm5nCiAgICAgICAgICBpZiAodGhpcy5kYXRhc291cmNlVVVJRC5zdGFydHNXaXRoKCctJykpIHsKICAgICAgICAgICAgdGhpcy5kYXRhc291cmNlVVVJRCA9IHRoaXMuZGF0YXNvdXJjZVVVSUQuc3Vic3RyaW5nKDEpCiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5kYXRhc291cmNlVVVJRC5lbmRzV2l0aCgnLScpKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YXNvdXJjZVVVSUQgPSB0aGlzLmRhdGFzb3VyY2VVVUlELnNsaWNlKDAsIC0xKQogICAgICAgICAgfQoKICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB1dWlkIGFscmVhZHkgZXhpc3RzLCBhdHRhY2ggdGltZSB0byB1dWlkIGlmIHNvCiAgICAgICAgICBsZXQgZHVwbGljYXRlSW5kZXggPSBzdG9yZS5zdGF0ZS5kYXRhc291cmNlSWRzLmluZGV4T2YodGhpcy5kYXRhc291cmNlVVVJRCkKICAgICAgICAgIGlmIChkdXBsaWNhdGVJbmRleCA+IC0xKSB7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKS50b1N0cmluZygpCiAgICAgICAgICAgIHRoaXMuZGF0YXNvdXJjZVVVSUQgKz0gJy0nICsgKGN1cnJlbnRUaW1lLnN1YnN0cigtNSwgNSkpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LCBjb25mLmRlYm91bmNlLmRlZmF1bHQpLAoKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNoZWNrRm9yRGF0YXNvdXJjZSgpCiAgfSwKICBwcm9wczogewogICAgZGF0YXNvdXJjZUlkOiBTdHJpbmcKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50RmllbGQ6ICcnLAogICAgICBjb2RlTWlycm9yT3B0aW9uc0pTT046IGNvbmYuY21PcHRpb25zLAogICAgICBjb2RlTWlycm9yT3B0aW9uc1B5dGhvbkVkaXRvcjogY29uZi5weXRob25FZGl0b3JPcHRpb25zLAogICAgICBkYXRhc291cmNlTmFtZTogbnVsbCwKICAgICAgZGF0YXNvdXJjZVVVSUQ6IG51bGwsCiAgICAgIGRhdGFzb3VyY2VVVUlERGVmYXVsdDogImRhdGFzb3VyY2UtIiArIERhdGUubm93KCkudG9TdHJpbmcoKS5zdWJzdHIoLTUsIDUpLAogICAgICBkYXRhc291cmNlVHlwZTogMCwKICAgICAgZGF0YXNvdXJjZVR5cGVzOiBbLi4uY29uZi5kYXRhc291cmNlVHlwZXMuc29ydCgpLHtuYW1lOiAnb3RoZXInLCBvcHRpb25zOiBbJ3BhdGgnXX1dLAogICAgICBkYXRlQ3JlYXRlZDogbnVsbCwKICAgICAgZGF0ZU1vZGlmaWVkOiBudWxsLAogICAgICBmaWVsZHM6IGNvbmYuc3BhcmtGaWVsZHMuc29ydCgpLAogICAgICBvcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAncGF0aCcsCiAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgICBmcmVlVGV4dDogZmFsc2UKICAgICAgICB9CiAgICAgIF0sCiAgICAgIG9yaWdpbmFsSW5kZXg6IG51bGwsCiAgICAgIHB5dGhvbkNvZGU6IG51bGwsCiAgICAgIHB5dGhvbkNvZGVDYWNoZTogbnVsbCwKICAgICAgcmVzdWx0czogbnVsbCwKICAgICAgc2NoZW1hOiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBmaWVsZFR5cGU6ICdTdHJpbmdUeXBlJywKICAgICAgICAgIG51bGxhYmxlOiBmYWxzZQogICAgICAgIH0KICAgICAgXSwKICAgICAgc2VsZWN0ZWRUYWI6IG51bGwsCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIHN0cmVhbWluZzogZmFsc2UsCiAgICAgIHRhYnNLZXk6IERhdGUubm93KCksCiAgICAgIHVzaW5nQWR2YW5jZWRFZGl0b3I6IGZhbHNlLAogICAgICB1cGRhdGluZ0Zyb21CYXNpYzogdHJ1ZSwKICAgICAgdXVpZERpc2FibGVkOiB0cnVlCiAgICB9CiAgfSwKfQoK"},{"version":3,"sources":["DataSourceEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataSourceEditor.vue","sourceRoot":"src/components/dashboard/config/data_sources","sourcesContent":["<template>\n  <div class=\"playground_holder\">\n    <h2>Datasource Editor</h2>\n    <b-modal\n        id=\"confirmEdit\"\n        :title=\"`${$t('Möchten Sie den erweiterten Editor verwenden?')}`\"\n        v-model=\"showModal\"\n        @ok=\"pythonCodeConfirmEdit(true)\"\n        @cancel=\"pythonCodeConfirmEdit(false)\"\n    >\n      <p>{{$t(\"Möchten Sie den Python-Code direkt bearbeiten? In diesem Fall wird der Basiseditor deaktiviert.\")}}</p>\n    </b-modal>\n    <b-tabs v-model=\"selectedTab\" :key=\"tabsKey\" class=\"sub-tabs\">\n      <!-- Basic editor tab -->\n      <b-tab :title=\"$t('Basiseditor')\" :active=\"selectedTab === 0\" :disabled=\"usingAdvancedEditor\">\n        <b-card class=\"basic editor\">\n          <div class=\"details\">\n            <div class=\"datasource-name\">\n              <div>\n                <h3>{{$t('Name der Datenquelle')}}</h3>\n                <input @input=\"uuidGenerate\" v-model=\"datasourceName\" type=\"text\" name=\"datasource-name\" />\n              </div>\n              <div>\n                <h3>ID</h3>\n                <div class=\"locked\">\n                  <input\n                      type=\"text\"\n                      id=\"uuid\"\n                      class=\"uuid greyed-out\"\n                      v-model=\"datasourceUUID\"\n                      :disabled=\"uuidDisabled\"\n                  />\n                  <b-button\n                      v-if=\"uuidDisabled\"\n                      variant=\"outline-secondary\"\n                      class=\"subtle edit-button\"\n                      @click=\"uuidAllowFreetext\"\n                  >\n                    ✎\n                  </b-button>\n                </div>\n              </div>\n            </div>\n            <DatasourceEditorButtons @run=\"run()\" @save=\"save()\" />\n          </div>\n          <div class=\"fields\">\n            <div class=\"drag-n-drop\">\n              <h3>{{$t('Felder ziehen und ablegen')}}</h3>\n              <span\n                  v-for=\"field in fields\" :key=\"field\" :field=\"field\"\n                  class=\"field\"\n                  @dragstart=\"fieldsSetFieldType(fieldsNew(field))\"\n                  draggable=\"true\"\n              >\n                     {{ field }}\n                     </span>\n            </div>\n            <div class=\"schema\">\n              <h3>{{$t('Schema')}}</h3>\n              <table id=\"schema\" class=\"table schema\">\n                <tr>\n                  <th class=\"hide-on-mobile\"></th>\n                  <th>{{$t('Feldname')}}</th>\n                  <th>{{$t('Feldtyp')}}</th>\n                  <th>Nullable</th>\n                  <th class=\"actions \">\n                    <b-button @click=\"fieldsAdd\" variant=\"outline-secondary\" class=\"add\">\n                      +\n                    </b-button>\n                  </th>\n                </tr>\n                <tr\n                    v-for=\"(line, index) in schema\"\n                    :key=\"`schema_line_${index}`\"\n                    draggable=\"true\"\n                    @dragstart=\"fieldsSetFieldType(schema[index], true)\"\n                    @drop=\"fieldsDrop\"\n                    @dragover=\"fieldsDragOverRow\"\n                    @dragleave=\"fieldsLeaveRow\"\n                >\n                  <td class=\"dragIcon hide-on-mobile\">☰</td>\n                  <td class=\"fieldName\"><input class=\"subtle input\" v-model=\"schema[index].name\" :placeholder=\"$t('Feldname')\" /></td>\n                  <td class=\"fieldType\">\n                    <select class=\"subtle\" v-model=\"schema[index].fieldType\">\n                      <option v-for=\"field in fields\" :key=\"`option_${field}`\">{{field}}</option>\n                    </select>\n                  </td>\n                  <td>\n                    <b-checkbox v-model=\"schema[index].nullable\" switch />\n                  </td>\n                  <td class=\"actions\">\n                    <b-button v-if=\"index > 0\" variant=\"outline-danger\" @click=\"fieldsDelete(index)\" class=\"subtle delete\">x</b-button>\n                  </td>\n                </tr>\n              </table>\n            </div>\n            <div class=\"dataTypes\">\n              <div class=\"datasourceType\">\n                <h3>{{$t('Datenquellentyp')}}</h3>\n                <select class=\"subtle\" v-model=\"datasourceType\">\n                  <option v-for=\"(format, index) in datasourceTypes\" :value=\"index\" :key=\"`format_${format.name}`\">{{format.name}}</option>\n                </select>\n              </div>\n              <div class=\"streaming\">\n                <h3>{{$t('Streaming')}}</h3>\n                <b-form-checkbox v-model=\"streaming\" switch />\n              </div>\n            </div>\n            <div class=\"options\">\n              <h3>{{$t('Optionen')}}</h3>\n              <table id=\"options\" class=\"table options\">\n                <tr>\n                  <th class=\"option-key\">{{$t('Optionsschlüssel')}}</th>\n                  <th>{{$t('Optionswert')}}</th>\n                  <th class=\"actions\">\n                    <b-button @click=\"optionsAdd\" variant=\"outline-secondary\" class=\"add\">\n                      +\n                    </b-button>\n                  </th>\n                </tr>\n                <tr\n                    v-for=\"(line, index) in options\"\n                    :key=\"`option_${index}`\"\n                >\n                  <td class=\"optionKey\">\n                    <div class=\"locked\" v-if=\"!options[index].freeText\">\n                      <select class=\"subtle wide\" v-model=\"options[index].key\" >\n                        <option\n                            v-for=\"(option, index) in datasourceTypes[datasourceType].options\"\n                            :key=\"`option_${index}`\"\n                        >\n                          {{ option }}\n                        </option>\n                      </select>\n                      <b-button\n                          variant=\"outline-secondary\"\n                          class=\"subtle small-button\"\n                          @click=\"optionsMakeKeyFreeText\"\n                      >\n                        ✎\n                      </b-button>\n                    </div>\n                    <input class=\"subtle wide\" v-else v-model=\"options[index].key\" :placeholder=\"$t('Optionsschlüssel')\" />\n                  </td>\n                  <td class=\"optionValue\">\n                    <input class=\"subtle input\" v-model=\"options[index].value\" :placeholder=\"$t('Optionswert')\" />\n                  </td>\n                  <td class=\"actions\">\n                    <b-button v-if=\"index > 0\" variant=\"outline-danger\" @click=\"optionsDelete(index)\" class=\"subtle delete\">x</b-button>\n                  </td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </b-card>\n      </b-tab>\n      <!-- Advanced editor tab -->\n      <b-tab :title=\"$t('fortgeschrittener Editor')\" :active=\"selectedTab === 1\" @click=\"pythonCodeRefresh\" >\n        <b-card class=\"advanced editor\">\n          <div class=\"advancedName\">\n            <div>\n              <h3>{{$t('Name der Datenquelle')}}</h3>\n              <input v-model=\"datasourceName\" type=\"text\" name=\"datasource-name\" />\n            </div>\n            <DatasourceEditorButtons @run=\"run()\" @save=\"save()\" />\n          </div>\n          <h3>Python editor</h3>\n          <div class=\"codeEditor\">\n            <codemirror\n                id=\"pythonEditor\"\n                @input=\"pythonCodeCheckEdit\"\n                @focus=\"updatingFromBasic = false; pythonCodeCache = pythonCode\"\n                @blur=\"updatingFromBasic = true\"\n                v-model=\"pythonCode\"\n                :options=\"codeMirrorOptionsPythonEditor\"\n            />\n          </div>\n        </b-card>\n      </b-tab>\n    </b-tabs>\n    <!-- Results -->\n    <b-card class=\"results table\">\n      <div class=\"resultsHeader\">\n        <h3>{{ $t('Ergebnisse') }}</h3>\n        <DatasourceEditorButtons mobile @run=\"run()\" @save=\"save()\" />\n      </div>\n      <table class=\"results\" v-if=\"results\">\n        <tr>\n          <th v-for=\"key in results['keys']\" :key=\"`key_${key}`\">{{key}}</th>\n        </tr>\n        <tr v-for=\"(row, index) in results['values']\" :key=\"`row_${index}`\">\n          <td v-for=\"(value, index) in row\" :key=\"`value_${index}`\" >{{value}}</td>\n        </tr>\n      </table>\n      <p v-else>\n        {{$t(\"Eine Vorschau der ersten 15 Ergebniszeilen wird hier angezeigt, wenn Sie Ihren Test erstellen und ausführen.\")}}\n      </p>\n    </b-card>\n  </div>\n</template>\n<script>\nimport debounce from 'debounce'\nimport store from \"@/store/store\";\nimport conf, {fakeData} from \"@/config\"\nimport commonMethods from \"@/mixins/commonMethods\";\nimport DatasourceEditorButtons from \"@/components/dashboard/config/data_sources/DatasourceEditorButtons\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"DataSourceEditor\",\n  components: {DatasourceEditorButtons},\n  mixins: [\n    commonMethods\n  ],\n  methods: {\n\n    // Datasource methods\n    checkForDatasource() {\n      if (this.datasourceId) {\n        // Dummy data, needs to be replaced with either an API call or getting the data from memory.\n        const datasource = fakeData.dataSources[0]\n\n        if (datasource.editorConfig.advanced) {\n          this.selectedTab = 1\n          this.tabsKey = Date.now()\n          this.pythonCode = datasource.pythonCode\n          this.usingAdvancedEditor = true\n        }\n        this.datasourceUUID = datasource.editorConfig.id.value\n        if (datasource.editorConfig.id.freeText) {\n          this.uuidAllowFreetext(false)\n        }\n        this.datasourceName = datasource.name\n        this.getDatasourceType(datasource.editorConfig.type)\n        this.streaming = datasource.editorConfig.streaming\n        this.schema = datasource.editorConfig.fields\n        this.options = datasource.editorConfig.options\n        this.dateModified = datasource.modified\n        this.dateCreated = this.sqlDate(datasource.created)\n      } else {\n        this.datasourceUUID = this.datasourceUUIDDefault\n        this.dateCreated = this.sqlDate()\n        this.dateModified = this.sqlDate()\n      }\n    },\n    getDatasourceType(type) {\n      for (let i = 0; i < this.datasourceTypes.length; i++) {\n        if (this.datasourceTypes[i].name === type) {\n          this.datasourceType = i\n        }\n      }\n    },\n    async run() {\n      this.pythonCodeGenerate();\n      // Fake API request to get some dummy data until the backend is ready.\n      const url = 'https://mocki.io/v1/de7ddbfc-3683-42d1-b6ca-1d98e95bb6ae'\n      const results = await axios.get(url);\n      this.results = results.data;\n    },\n    async save() {\n      this.pythonCodeGenerate();\n      const datasourceToSave = {\n        name: this.datasourceName,\n        editorConfig: {\n          id: {\n            value: this.datasourceUUID,\n            freeText: !this.uuidDisabled,\n          },\n          type: this.datasourceType,\n          streaming: this.streaming,\n          fields: this.schema,\n          options: this.options,\n          advanced: this.usingAdvancedEditor\n        },\n        pythonCode: this.pythonCode,\n        created: this.dateCreated,\n        modified: this.sqlDate(),\n      }\n      // Temporarily logging, this will be sent to the API to be saved.\n      console.log(datasourceToSave)\n    },\n\n\n    // Fields methods\n    fieldsAdd() {\n      this.schema.push(this.fieldsNew(this.fields[0]))\n    },\n    fieldsDelete(index) {\n      this.schema.splice(index, 1)\n    },\n    fieldsNew(fieldType) {\n      return {\n        name: '',\n        fieldType: fieldType,\n        nullable: false\n      }\n    },\n    fieldsSetFieldType(field, move = false) {\n      this.currentField = field\n      if (move) {\n        this.originalIndex = event.currentTarget.rowIndex-1\n      }\n    },\n    fieldsDragOverRow(event) {\n      event.preventDefault();\n      event.currentTarget.classList.add('currentRow');\n    },\n    fieldsLeaveRow(event) {\n      event.currentTarget.classList.remove('currentRow');\n    },\n    fieldsDrop(event) {\n      event.preventDefault();\n      // Delete the original row if necessary\n      if (this.originalIndex !== null) {\n        // Needs to check specifically for null as otherwise row 0 is treated as falsy\n        this.schema.splice(this.originalIndex, 1)\n      }\n      // Add the new or cloned item\n      let targetRow = event.currentTarget.rowIndex\n      if (this.originalIndex !== null) {\n        if (this.originalIndex <= targetRow-1) {\n          targetRow --\n        }\n      }\n      this.schema.splice(targetRow, 0, this.currentField)\n      event.currentTarget.classList.remove('currentRow');\n      this.originalIndex = null\n    },\n\n    // Options methods\n    optionsAdd() {\n      const option = {\n        key: 'path',\n        value: '',\n        freeText: false\n      }\n      this.options.push(option)\n    },\n    optionsDelete(index) {\n      this.options.splice(index, 1)\n    },\n    optionsMakeKeyFreeText(event) {\n      event.preventDefault()\n      const optionIndex = event.currentTarget.parentNode.parentNode.parentNode.rowIndex - 1\n      this.options[optionIndex].freeText = true\n      const inputs = event.currentTarget.parentNode.parentNode.getElementsByTagName('input')\n      // Set very short timeout to give it time to render before focussing.\n      setTimeout(function(){ inputs[0].focus() }, 10);\n\n    },\n\n    // Python Code methods\n    pythonCodeCheckEdit() {\n      if (!this.usingAdvancedEditor && !this.updatingFromBasic) {\n        this.showModal = true\n      }\n    },\n    pythonCodeConfirmEdit(confirm) {\n      this.showModal = false;\n      this.usingAdvancedEditor = confirm;\n      if (!confirm) {\n        this.pythonCode = this.pythonCodeCache\n      }\n    },\n    pythonCodeGenerate() {\n      if (!this.usingAdvancedEditor) {\n        // Only automatically generate Python code if the user is using the basic editor.\n        this.pythonCode = this.pythonCodeGetSchema() + conf.python.newLine\n        this.pythonCode += 'df = spark.read'\n        if (this.streaming) {\n          this.pythonCode += 'Stream'\n        }\n        this.pythonCode += conf.python.lineBreak\n        this.pythonCode += conf.python.tab + `.format(\"${this.datasourceTypes[this.datasourceType].name}\")` + conf.python.lineBreak\n        this.pythonCode += this.pythonCodeGetOptions()\n        this.pythonCode += conf.python.tab + `.schema(schema)` + conf.python.lineBreak\n        this.pythonCode += conf.python.tab + `.load()` + conf.python.newLine\n        this.pythonCode += `df.createOrReplaceTempView(\"${this.datasourceUUID}\")`\n      }\n    },\n    pythonCodeGetSchema() {\n      let pythonSchema = '' +\n          'schema = StructType([\\n'\n      this.schema.forEach(\n          (field) => {\n            pythonSchema += conf.python.tab + `StructField(\"${field.name}\", ${field.fieldType}(), ${field.nullable}),\\n`\n          }\n      );\n      pythonSchema += '])'\n      return pythonSchema\n    },\n    pythonCodeGetOptions() {\n      let pythonOptions = ''\n      this.options.forEach(\n          (option) => {\n            pythonOptions += conf.python.tab + `.option(\"${option.key}\", \"${option.value}\")` + conf.python.lineBreak\n          }\n      )\n      return pythonOptions\n    },\n    pythonCodeRefresh() {\n      this.pythonCodeGenerate()\n    },\n\n    // UUID methods\n    uuidAllowFreetext(focus = true) {\n      this.uuidDisabled = false;\n      const uuidEditor = document.getElementById(\"uuid\")\n      uuidEditor.classList.remove('greyed-out')\n      if (focus) {\n        // Set very short timeout to give it time to render before focussing.\n        setTimeout(function(){ uuidEditor.focus() }, 10);\n      }\n    },\n    uuidGenerate: debounce(function () {\n      // Don't generate a new id if freetext mode has been unlocked.\n      if (this.uuidDisabled) {\n        // Produce a default if the name has been deleted entirely\n        if (!this.datasourceName) {\n          this.datasourceUUID = this.datasourceUUIDDefault\n        }\n        else {\n          // Lowercase and replace non alpha-numeric characters with dashes,\n          // and limit to one dash between each valid character\n          this.datasourceUUID = this.datasourceName\n              .toLowerCase()\n              .trim()\n              .replace(/[^(a-z0-9-)]/g, '-')\n              .replace(/-+(?=-)/g,'')\n          // Trim dashes from beginning and end of the stirng\n          if (this.datasourceUUID.startsWith('-')) {\n            this.datasourceUUID = this.datasourceUUID.substring(1)\n          }\n          if (this.datasourceUUID.endsWith('-')) {\n            this.datasourceUUID = this.datasourceUUID.slice(0, -1)\n          }\n\n          // Check if the uuid already exists, attach time to uuid if so\n          let duplicateIndex = store.state.datasourceIds.indexOf(this.datasourceUUID)\n          if (duplicateIndex > -1) {\n            const currentTime = Date.now().toString()\n            this.datasourceUUID += '-' + (currentTime.substr(-5, 5))\n          }\n        }\n      }\n    }, conf.debounce.default),\n\n  },\n  mounted() {\n    this.checkForDatasource()\n  },\n  props: {\n    datasourceId: String\n  },\n  data() {\n    return {\n      currentField: '',\n      codeMirrorOptionsJSON: conf.cmOptions,\n      codeMirrorOptionsPythonEditor: conf.pythonEditorOptions,\n      datasourceName: null,\n      datasourceUUID: null,\n      datasourceUUIDDefault: \"datasource-\" + Date.now().toString().substr(-5, 5),\n      datasourceType: 0,\n      datasourceTypes: [...conf.datasourceTypes.sort(),{name: 'other', options: ['path']}],\n      dateCreated: null,\n      dateModified: null,\n      fields: conf.sparkFields.sort(),\n      options: [\n        {\n          key: 'path',\n          value: '',\n          freeText: false\n        }\n      ],\n      originalIndex: null,\n      pythonCode: null,\n      pythonCodeCache: null,\n      results: null,\n      schema: [\n        {\n          name: '',\n          fieldType: 'StringType',\n          nullable: false\n        }\n      ],\n      selectedTab: null,\n      showModal: false,\n      streaming: false,\n      tabsKey: Date.now(),\n      usingAdvancedEditor: false,\n      updatingFromBasic: true,\n      uuidDisabled: true\n    }\n  },\n}\n\n</script>\n<style lang='scss' scoped>\nh2 {\n  font-size: 1.25em;\n}\n.fields {\n  display: grid;\n  justify-content: left;\n  align-items: start;\n  grid-gap: 2em;\n  grid-template-areas: \"drag-n-drop schema\"\n   \"datatypes schema\"\n   \"options schema\";\n  .drag-n-drop {\n    grid-area: drag-n-drop;\n  }\n  .schema {\n    grid-area: schema;\n  }\n  .options {\n    grid-area: options;\n  }\n  .dataTypes {\n    grid-area: datatypes;\n  }\n}\n.disabled {\n  color:#999 !important;\n}\n.vue-codemirror {\n  &#pythonEditor {\n    .CodeMirror {\n      height: auto;\n      padding:1em;\n      border-radius: .5em;\n    }\n  }\n}\n.sub-tabs {\n  .nav-tabs {\n    border-bottom-width: 2px;\n    .nav-item {\n      .nav-link {\n        background-color: transparent !important;\n        padding: 0 1em .6em 1em;\n        border: none !important;\n        box-shadow: none !important;\n        font-weight: normal !important;\n        &:hover {\n          font-weight: bold !important;\n          color: #e60000 !important;\n        }\n        &.active {\n          background-color: transparent;\n          font-weight: bold !important;\n          cursor: default;\n          border-bottom:3px solid #e60000 !important;\n          &:hover {\n            color: inherit !important;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}
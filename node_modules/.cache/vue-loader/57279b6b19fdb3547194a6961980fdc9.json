{"remainingRequest":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/src/components/dashboard/data/prices/PricesList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/src/components/dashboard/data/prices/PricesList.vue","mtime":1639653885450},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/cache-loader/dist/cjs.js","mtime":1639655034192},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/babel-loader/lib/index.js","mtime":1639655034093},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/cache-loader/dist/cjs.js","mtime":1639655034192},{"path":"/Users/sorens/Documents/GitHub/vfde-inv-var-ui-demo/node_modules/vue-loader/lib/index.js","mtime":1639655080628}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZmFrZURhdGF9IGZyb20gIkAvY29uZmlnIjsKaW1wb3J0IGNvbW1vbk1ldGhvZHMgZnJvbSAiQC9taXhpbnMvY29tbW9uTWV0aG9kcyI7CmltcG9ydCBzaWRlYmFyTWV0aG9kcyBmcm9tICJAL21peGlucy9zaWRlYmFyTWV0aG9kcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGF0YVNvdXJjZUxpc3QiLAogIG1peGluczogWwogICAgY29tbW9uTWV0aG9kcywKICAgIHNpZGViYXJNZXRob2RzCiAgXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvZHVjdHM6IG51bGwsCiAgICAgIHByb2R1Y3RJZHM6IFtdLAogICAgICBmaWVsZHM6IFtdLAogICAgICBhYmJyZXZpYXRlQWZ0ZXJDb2x1bW46IDAsCiAgICAgIHJlc2l6ZVRpbWVyOiBudWxsLAogICAgICBzaWRlYmFyczogW10KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemVFdmVudCk7CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemVFdmVudCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNpemVFdmVudCgpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZXIpOwogICAgICB0aGlzLnJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCh0aGlzLnJlZnJlc2hUYWJsZSwgMTAwKTsKICAgIH0sCiAgICBzaG93SGlkZGVuKGVsZW1lbnRzKSB7CiAgICAgIGZvciAobGV0IGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbi1jb2x1bW4nKQogICAgICB9CiAgICB9LAogICAgc2hvd1NpZGViYXIoaWQsIHByb2R1Y3QsIHB1c2ggPSB0cnVlKSB7CiAgICAgIHRoaXMuc2lkZWJhcnMgPSBbXQogICAgICBjb25zdCBzaWRlYmFyID0gewogICAgICAgIGlkOiBpZCwKICAgICAgICBjb250ZW50OiBwcm9kdWN0LAogICAgICAgIHR5cGU6ICdwcm9kdWN0RWRpdG9yJywKICAgICAgICB3aWR0aDogMjUKICAgICAgfQogICAgICB0aGlzLnNpZGViYXJzLnB1c2goc2lkZWJhcikKICAgICAgdGhpcy4kZW1pdCgncGFzc1NpZGViYXJzJywgdGhpcy5zaWRlYmFycykKICAgICAgaWYgKHB1c2gpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChgZWRpdG9yLyR7aWR9YCkKICAgICAgfQogICAgfSwKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcwogICAgICBsZXQgc2hvd0FsbEhpZGRlbkNlbGxzID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgY29tcG9uZW50LnNob3dIaWRkZW4oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RoJykpCiAgICAgICAgY29tcG9uZW50LnNob3dIaWRkZW4oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJykpCiAgICAgICAgY29uc3QgYW1vdW50TGVmdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hpZGRlbi1jb2x1bW4nKS5sZW5ndGgKICAgICAgICBpZiAoYW1vdW50TGVmdCA9PT0gMCkgewogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoIlRoZXJlIHdhcyBhbiBlcnJvciBvbiByZXNpemluZyB0aGUgdGFibGUuIik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgc2hvd0FsbEhpZGRlbkNlbGxzLnRoZW4oCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29tcG9uZW50LmNoZWNrRm9yVGFibGVDbGlwcGluZygpCiAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgfQogICAgICApOwogICAgfSwKICAgIGNoZWNrRm9yVGFibGVDbGlwcGluZygpIHsKICAgICAgLy8gUmVzZXQgdGhlIGNvbHVtbiB0byBhbGxvdyBmb3IgcmVzaXppbmcuCiAgICAgIHRoaXMuYWJicmV2aWF0ZUFmdGVyQ29sdW1uID0gMAogICAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGFibGUtd3JhcHBlciIpCiAgICAgIGNvbnN0IHdyYXBwZXJXaWR0aCA9IHRhYmxlV3JhcHBlci5vZmZzZXRXaWR0aAogICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcm9kdWN0c1RhYmxlIikKICAgICAgY29uc3QgdGFibGVIZWFkZXJzID0gdGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRoIikKICAgICAgY29uc3QgdGFibGVSb3dzID0gdGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyIikKICAgICAgbGV0IHRvdGFsV2lkdGggPSAwCiAgICAgIGZvciAobGV0IGk9MDsgKHRoaXMuYWJicmV2aWF0ZUFmdGVyQ29sdW1uID09PSAwICYmIGk8dGFibGVIZWFkZXJzLmxlbmd0aCk7IGkrKykgewogICAgICAgIGNvbnN0IGNvbHVtbkhlYWRlciA9IHRhYmxlSGVhZGVyc1tpXQogICAgICAgIGNvbnN0IGNvbHVtbldpZHRoID0gY29sdW1uSGVhZGVyLm9mZnNldFdpZHRoCiAgICAgICAgdG90YWxXaWR0aCA9IHRvdGFsV2lkdGggKyBjb2x1bW5XaWR0aAogICAgICAgIGNvbnN0IG91dE9mQm91bmRzID0gdG90YWxXaWR0aCA+PSB3cmFwcGVyV2lkdGgKICAgICAgICBpZiAob3V0T2ZCb3VuZHMpIHsKICAgICAgICAgIHRoaXMuYWJicmV2aWF0ZUFmdGVyQ29sdW1uID0gaS0xCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmKHRoaXMuYWJicmV2aWF0ZUFmdGVyQ29sdW1uIDwgdGFibGVIZWFkZXJzLmxlbmd0aC0xKSB7CiAgICAgICAgdGhpcy5hYmJyZXZpYXRlVGFibGUodGFibGVIZWFkZXJzLHRhYmxlUm93cykKICAgICAgfQogICAgfSwKICAgIGFiYnJldmlhdGVUYWJsZShoZWFkZXJzLCByb3dzKSB7CiAgICAgIGNvbnN0IG51bWJlck9mQ29sdW1ucyA9IGhlYWRlcnMubGVuZ3RoIC0gMQogICAgICBjb25zdCBudW1iZXJPZlJvd3MgPSByb3dzLmxlbmd0aAogICAgICBmb3IgKGxldCBpPXRoaXMuYWJicmV2aWF0ZUFmdGVyQ29sdW1uOyBpPG51bWJlck9mQ29sdW1uczsgaSsrKSB7CiAgICAgICAgY29uc3QgaGVhZGVyID0gaGVhZGVyc1tpXQogICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4tY29sdW1uJykKICAgICAgfQogICAgICBmb3IgKGxldCBpPTA7IGk8bnVtYmVyT2ZSb3dzOyBpKyspIHsKICAgICAgICBjb25zdCBjb2x1bW5zID0gcm93c1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKQogICAgICAgIGZvciAobGV0IG4gPSB0aGlzLmFiYnJldmlhdGVBZnRlckNvbHVtbjsgbjxudW1iZXJPZkNvbHVtbnM7IG4rKykgewogICAgICAgICAgY29uc3QgY29sdW1uID0gY29sdW1uc1tuXQogICAgICAgICAgY29sdW1uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbi1jb2x1bW4nKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNoZWNrRm9yRWRpdG9yKCkgewogICAgICBjb25zdCBwYXRoRWxlbWVudHMgPSB0aGlzLiRyb3V0ZS5wYXRoLnNwbGl0KCcvJykKICAgICAgaWYocGF0aEVsZW1lbnRzLmluY2x1ZGVzKCdlZGl0b3InKSkgewogICAgICAgIGxldCBpZCA9IHBhdGhFbGVtZW50c1twYXRoRWxlbWVudHMubGVuZ3RoLTFdCiAgICAgICAgaWYgKGlkID09PSAnZWRpdG9yJykgewogICAgICAgICAgaWQgPSBudWxsCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNpZGViYXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy5zaG93U2lkZWJhcihpZCwgdGhpcy5nZXROdGhPYmplY3RFbGVtZW50KHRoaXMucHJvZHVjdHMsIDApLCBmYWxzZSkKICAgICAgICB9CiAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICd0eXBlJzogJ3Byb2R1Y3RFZGl0b3InLAogICAgICAgICAgJ2lkJzogaWQsCiAgICAgICAgICAnd2lkdGgnOiAyNQogICAgICAgIH0KICAgICAgICB0aGlzLnN0b3BNYWluU2Nyb2xsKCkKICAgICAgICB0aGlzLiRlbWl0KCdzaG93U2lkZWJhcicsIGRhdGEpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXN0b3JlTWFpblNjcm9sbCgpCiAgICAgIH0KICAgIH0sCiAgICBwYWdlU2V0dXAoKSB7CiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMKICAgICAgbGV0IHNldFVwRGF0YSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbXBvbmVudC5wcm9kdWN0cyA9IGZha2VEYXRhLnByb2R1Y3RzCiAgICAgICAgY29tcG9uZW50LnByb2R1Y3RJZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnQucHJvZHVjdHMpCiAgICAgICAgY29tcG9uZW50LmZpZWxkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudC5wcm9kdWN0c1tPYmplY3Qua2V5cyhjb21wb25lbnQucHJvZHVjdHMpWzBdXSkKICAgICAgICBpZiAodHlwZW9mIGNvbXBvbmVudC5wcm9kdWN0cyA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KGBUaGVyZSB3YXMgYW4gZXJyb3IgaW4gZ2V0dGluZyB0aGUgZGF0YS4gUHJvZHVjdHMgd2FzIHNldCBhcyAke3R5cGVvZiBjb21wb25lbnQucHJvZHVjdHN9YCk7CiAgICAgICAgfQogICAgICB9KQogICAgICBzZXRVcERhdGEudGhlbigKICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgIC8vIEJvdGggb2YgdGhlc2UgbmVlZCB0aGUgZGF0YSB0byBiZSBwcmVzZW50IHRvIHdvcmssIHNvIHRoZXkncmUgd3JhcHBlZCBpbiBhIHByb21pc2UuCiAgICAgICAgICBjb21wb25lbnQuY2hlY2tGb3JUYWJsZUNsaXBwaW5nKCkKICAgICAgICAgIGNvbXBvbmVudC5jaGVja0ZvckVkaXRvcigpCiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfQogICAgICApCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5wYWdlU2V0dXAoKQogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSgpIHsKICAgICAgdGhpcy5jaGVja0ZvckVkaXRvcigpCiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["PricesList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PricesList.vue","sourceRoot":"src/components/dashboard/data/prices","sourcesContent":["<template>\n  <div id=\"table-wrapper\">\n    <table class=\"table\" id=\"productsTable\" >\n      <thead>\n        <th :key=\"`field_${index}`\" v-for=\"(field, index) in fields\">{{ $t(field) }}</th>\n        <th class=\"actions\">&hellip;</th>\n      </thead>\n      <tbody>\n        <tr v-for=\"id in productIds\" :key=\"`product_${id}`\">\n          <td :key=\"`value_${subIndex}`\" v-for=\"(value, subIndex) in products[id]\" >\n            {{products[id][subIndex]}}\n          </td>\n          <td class=\"actions\">\n            <font-awesome-icon\n                class=\"icon expand\"\n                icon=\"edit\"\n                :alt=\"$t('Details erweitern')\"\n                @click=\"showSidebar(id, products[id])\"\n            />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport {fakeData} from \"@/config\";\nimport commonMethods from \"@/mixins/commonMethods\";\nimport sidebarMethods from \"@/mixins/sidebarMethods\";\nexport default {\n  name: \"DataSourceList\",\n  mixins: [\n    commonMethods,\n    sidebarMethods\n  ],\n  data() {\n    return {\n      products: null,\n      productIds: [],\n      fields: [],\n      abbreviateAfterColumn: 0,\n      resizeTimer: null,\n      sidebars: []\n    }\n  },\n  created() {\n    window.addEventListener(\"resize\", this.resizeEvent);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.resizeEvent);\n  },\n  methods: {\n    resizeEvent() {\n      clearTimeout(this.resizeTimer);\n      this.resizeTimer = setTimeout(this.refreshTable, 100);\n    },\n    showHidden(elements) {\n      for (let i=0; i<elements.length; i++) {\n        elements[i].classList.remove('hidden-column')\n      }\n    },\n    showSidebar(id, product, push = true) {\n      this.sidebars = []\n      const sidebar = {\n        id: id,\n        content: product,\n        type: 'productEditor',\n        width: 25\n      }\n      this.sidebars.push(sidebar)\n      this.$emit('passSidebars', this.sidebars)\n      if (push) {\n        this.$router.push(`editor/${id}`)\n      }\n    },\n    refreshTable() {\n      const component = this\n      let showAllHiddenCells = new Promise(function(resolve, reject) {\n        component.showHidden(document.getElementsByTagName('th'))\n        component.showHidden(document.getElementsByTagName('td'))\n        const amountLeft = document.getElementsByClassName('hidden-column').length\n        if (amountLeft === 0) {\n          resolve();\n        } else {\n          reject(\"There was an error on resizing the table.\");\n        }\n      });\n      showAllHiddenCells.then(\n          function() {\n            component.checkForTableClipping()\n          },\n          function(error) {\n            console.log(error);\n          }\n      );\n    },\n    checkForTableClipping() {\n      // Reset the column to allow for resizing.\n      this.abbreviateAfterColumn = 0\n      const tableWrapper = document.getElementById(\"table-wrapper\")\n      const wrapperWidth = tableWrapper.offsetWidth\n      const table = document.getElementById(\"productsTable\")\n      const tableHeaders = table.getElementsByTagName(\"th\")\n      const tableRows = table.getElementsByTagName(\"tr\")\n      let totalWidth = 0\n      for (let i=0; (this.abbreviateAfterColumn === 0 && i<tableHeaders.length); i++) {\n        const columnHeader = tableHeaders[i]\n        const columnWidth = columnHeader.offsetWidth\n        totalWidth = totalWidth + columnWidth\n        const outOfBounds = totalWidth >= wrapperWidth\n        if (outOfBounds) {\n          this.abbreviateAfterColumn = i-1\n        }\n      }\n      if(this.abbreviateAfterColumn < tableHeaders.length-1) {\n        this.abbreviateTable(tableHeaders,tableRows)\n      }\n    },\n    abbreviateTable(headers, rows) {\n      const numberOfColumns = headers.length - 1\n      const numberOfRows = rows.length\n      for (let i=this.abbreviateAfterColumn; i<numberOfColumns; i++) {\n        const header = headers[i]\n        header.classList.add('hidden-column')\n      }\n      for (let i=0; i<numberOfRows; i++) {\n        const columns = rows[i].getElementsByTagName(\"td\")\n        for (let n = this.abbreviateAfterColumn; n<numberOfColumns; n++) {\n          const column = columns[n]\n          column.classList.add('hidden-column')\n        }\n      }\n    },\n    checkForEditor() {\n      const pathElements = this.$route.path.split('/')\n      if(pathElements.includes('editor')) {\n        let id = pathElements[pathElements.length-1]\n        if (id === 'editor') {\n          id = null\n        } else if (this.sidebars.length === 0) {\n          this.showSidebar(id, this.getNthObjectElement(this.products, 0), false)\n        }\n        const data = {\n          'type': 'productEditor',\n          'id': id,\n          'width': 25\n        }\n        this.stopMainScroll()\n        this.$emit('showSidebar', data)\n      } else {\n        this.restoreMainScroll()\n      }\n    },\n    pageSetup() {\n      const component = this\n      let setUpData = new Promise(function(resolve, reject) {\n        component.products = fakeData.products\n        component.productIds = Object.keys(component.products)\n        component.fields = Object.keys(component.products[Object.keys(component.products)[0]])\n        if (typeof component.products === 'object') {\n          resolve();\n        } else {\n          reject(`There was an error in getting the data. Products was set as ${typeof component.products}`);\n        }\n      })\n      setUpData.then(\n        function() {\n          // Both of these need the data to be present to work, so they're wrapped in a promise.\n          component.checkForTableClipping()\n          component.checkForEditor()\n        },\n        function(error) {\n          console.log(error)\n        }\n      )\n    }\n  },\n  mounted() {\n    this.pageSetup()\n  },\n  watch: {\n    $route() {\n      this.checkForEditor()\n    }\n  }\n}\n\n</script>\n\n<style scoped lang=\"scss\">\n#table-wrapper {\n  overflow: hidden;\n  table {\n    text-align: left;\n    th {\n      text-transform: capitalize;\n      white-space: nowrap;\n      &.actions {\n        text-align: center;\n      }\n    }\n    td {\n      white-space: nowrap;\n      &.actions {\n        text-align: center;\n        .expand {\n          cursor: pointer;\n          color: rgb(108,108,108);\n          &:hover {\n            color: #000;\n          }\n        }\n      }\n    }\n    .hidden-column {\n      display: none;\n    }\n  }\n}\n\n</style>\n"]}]}